const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LotteryBet-B9T2hgci.js","assets/vendor-fsJ2yqg7.js","assets/ant-design-vue-BV8TBcly.js","assets/ant-icons-Cs-RbiQW.js","assets/web3-WkWxvw6o.js","assets/LotteryBet-CgWC5gXt.css"])))=>i.map(i=>d[i]);
import{b7 as M,b8 as c,z as o,b9 as r,ba as a,bb as ce,bc as Ie,e as me,bd as Be,be as f,bf as ze,bg as Z,h as d,bh as te,S as I,bi as v,bj as pe,u as K,bk as ye,o as fe,F as X,b as De,r as Me,bl as be,bm as $e,bn as xe,bo as Se,bp as We}from"./vendor-fsJ2yqg7.js";import{L as Oe,a as Le,_ as Fe,S as ne,D as He,B as ae,M as qe,b as Ue,c as ve,d as ge,e as he,f as we,g as oe,h as x,i as Ve,j as se}from"./ant-design-vue-BV8TBcly.js";import{W as Ye}from"./web3-WkWxvw6o.js";import{L as je}from"./ant-icons-Cs-RbiQW.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const y of t)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function s(t){const y={};return t.integrity&&(y.integrity=t.integrity),t.referrerPolicy&&(y.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?y.credentials="include":t.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(t){if(t.ep)return;t.ep=!0;const y=s(t);fetch(t.href,y)}})();const Ge={class:"fullscreen-container"},Ze={__name:"AdminLayout",setup(e){return(n,s)=>{const i=Oe,t=Le,y=Fe;return c(),M("div",Ge,[o(y,{style:{height:"100vh"}},{default:r(()=>[o(i,{style:{color:"#fff",background:"#001529"}},{default:r(()=>s[0]||(s[0]=[a("h1",{style:{margin:"0"}},null,-1)])),_:1,__:[0]}),o(t,{style:{flex:"1","justify-content":"center","align-items":"center",background:"#f5f5f5"}},{default:r(()=>[ce(n.$slots,"default")]),_:3})]),_:3})])}}},V=(e,n)=>{const s=e.__vccOpts||e;for(const[i,t]of n)s[i]=t;return s},Xe={},Ke={class:"main-container bg-img"};function Je(e,n){return c(),M("div",Ke,[ce(e.$slots,"default",{},void 0,!0)])}const ie=V(Xe,[["render",Je],["__scopeId","data-v-837d8d0d"]]),Qe={id:"app"},et={__name:"App",setup(e){const n=Ie(),s={AdminLayout:Ze,FullscreenLayout:ie},i=me(()=>s[n.meta.layout]||ie);return(t,y)=>{const g=Be("router-view");return c(),M("div",Qe,[(c(),f(ze(i.value),null,{default:r(()=>[o(g)]),_:1}))])}}},tt="modulepreload",nt=function(e){return"/"+e},le={},at=function(n,s,i){let t=Promise.resolve();if(s&&s.length>0){let g=function(p){return Promise.all(p.map(E=>Promise.resolve(E).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),w=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));t=g(s.map(p=>{if(p=nt(p),p in le)return;le[p]=!0;const E=p.endsWith(".css"),z=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${z}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":tt,E||(R.as="script"),R.crossOrigin="",R.href=p,w&&R.setAttribute("nonce",w),document.head.appendChild(R),E)return new Promise((D,$)=>{R.addEventListener("load",D),R.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${p}`)))})}))}function y(g){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=g,window.dispatchEvent(b),!b.defaultPrevented)throw g}return t.then(g=>{for(const b of g||[])b.status==="rejected"&&y(b.reason);return n().catch(y)})},ot={style:{"margin-right":"20px","margin-top":"10px"}},st={__name:"WalletConnect",setup(e){const n=te(),{t:s,locale:i}=Z(),t=d(null),y=()=>{i.value="zh"},g=()=>{i.value="en"},b=()=>{i.value=="zh"?n.push("/About"):n.push("/About-En")},w=async()=>{if(window.ethereum){const E=await window.ethereum.request({method:"eth_requestAccounts"});t.value=E[0]}else alert("Please install MetaMask")},p=me(()=>t.value?t.value.slice(0,6)+"..."+t.value.slice(-4):"");return(E,z)=>{const R=ae,D=Ue,$=qe,W=He,T=ne;return c(),M("div",ot,[o(T,null,{default:r(()=>[o(W,null,{overlay:r(()=>[o($,null,{default:r(()=>[o(D,null,{default:r(()=>[a("a",{onClick:y},"中文")]),_:1}),K(i).value!=="en"?(c(),f(D,{key:0},{default:r(()=>[a("a",{onClick:g},"English")]),_:1})):pe("",!0)]),_:1})]),default:r(()=>[o(R,{type:"text",style:{color:"white"}},{default:r(()=>[I(v(E.$t("message.language")),1)]),_:1})]),_:1})]),_:1}),o(T,null,{default:r(()=>[o(W,null,{default:r(()=>[o(R,{type:"text",onClick:b,style:{color:"white"}},{default:r(()=>[I(v(E.$t("message.about")),1)]),_:1})]),_:1})]),_:1}),o(T,null,{default:r(()=>[o(R,{type:"text",onClick:w,style:{"margin-left":"10px",color:"white"}},{default:r(()=>[I(v(t.value?K(s)("message.connected")+": "+p.value:K(s)("message.connectWallet")),1)]),_:1})]),_:1})])}}},rt=V(st,[["__scopeId","data-v-4ac08b9f"]]),_e="0xABF2Fc9f342b42Ec79AAaFcF5Bc3d604f3bf3e89",it=[{inputs:[{internalType:"uint256",name:"subscriptionId",type:"uint256"},{internalType:"address",name:"_vrfCoordinator",type:"address"},{internalType:"bytes32",name:"_keyHash",type:"bytes32"},{internalType:"uint8",name:"_rewardRate",type:"uint8"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"have",type:"address"},{internalType:"address",name:"want",type:"address"}],name:"OnlyCoordinatorCanFulfill",type:"error"},{inputs:[{internalType:"address",name:"have",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"coordinator",type:"address"}],name:"OnlyOwnerOrCoordinator",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"vrfCoordinator",type:"address"}],name:"CoordinatorSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"round",type:"uint32"},{indexed:!1,internalType:"uint128",name:"prizeAmount",type:"uint128"}],name:"DistributePrizesAndEndCurrentRoundEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"round",type:"uint32"}],name:"PreDistributePrizesEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"PreDistributeReward",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"PrizeClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!0,internalType:"uint32",name:"round",type:"uint32"},{indexed:!1,internalType:"uint8",name:"winNumber",type:"uint8"},{indexed:!1,internalType:"uint128",name:"betAmount",type:"uint128"},{indexed:!1,internalType:"uint128",name:"prizeAmount",type:"uint128"}],name:"PrizeDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"round",type:"uint32"},{indexed:!1,internalType:"uint8",name:"randomNumber",type:"uint8"}],name:"RandomNumberFulfilled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"RandomNumberRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"round",type:"uint32"},{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint64",name:"totalPlayer",type:"uint64"},{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"}],name:"RefundTicketsEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!0,internalType:"uint32",name:"round",type:"uint32"},{indexed:!1,internalType:"uint8",name:"number",type:"uint8"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"TicketPurchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"WithdrawAll",type:"event"},{inputs:[],name:"BATCH_COUNT",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"DELAY_DURATION",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"DISTRIBUTE_PRIZES_REWARD",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"INIT_ROUND_DURATION",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_NUMBER",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_BET_AMOUNT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_NUMBER",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"PRE_DISTRIBUTE_PRIZES_REWARD",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROUND_DURATION",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"number",type:"uint8"}],name:"buyTicket",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimPrize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"distributePrizesAndEndCurrentRound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getCurrentRoundTotalAmount",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentTicketsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLotteryStatus",outputs:[{internalType:"enum Lottery.LotteryStatus",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMyTicket",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint128",name:"",type:"uint128"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_player",type:"address"}],name:"getPlayerInfo",outputs:[{components:[{internalType:"address",name:"player",type:"address"},{internalType:"uint128",name:"currentBetAmount",type:"uint128"},{internalType:"uint8",name:"currentBetNumber",type:"uint8"},{internalType:"uint128",name:"pendingPrize",type:"uint128"}],internalType:"struct Lottery.PlayerInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"getPlayerTicket",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint128",name:"",type:"uint128"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTickets",outputs:[{components:[{internalType:"address",name:"player",type:"address"},{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint8",name:"number",type:"uint8"}],internalType:"struct Lottery.Ticket[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"number",type:"uint8"}],name:"getTotalAmountForNumber",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"initBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lotteryInfo",outputs:[{internalType:"uint32",name:"round",type:"uint32"},{internalType:"uint256",name:"startNumber",type:"uint256"},{internalType:"uint256",name:"endNumber",type:"uint256"},{internalType:"bool",name:"isLotteryOpen",type:"bool"},{internalType:"uint128",name:"totalPrizePool",type:"uint128"},{internalType:"uint128",name:"totalPendingRewards",type:"uint128"},{internalType:"uint256",name:"lastRequestId",type:"uint256"},{internalType:"uint8",name:"latestRandomNumber",type:"uint8"},{internalType:"uint8",name:"rewardRate",type:"uint8"},{internalType:"bool",name:"isDistributing",type:"bool"},{internalType:"uint256",name:"cumulativePrizeAmount",type:"uint256"},{internalType:"uint128",name:"cumulativeWinners",type:"uint128"},{internalType:"uint64",name:"distributedCount",type:"uint64"},{internalType:"uint128",name:"cumulativePlayers",type:"uint128"},{internalType:"uint256",name:"cumulativeBetAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"pendingRewards",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"preDistributePrizes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"requestId",type:"uint256"},{internalType:"uint256[]",name:"randomWords",type:"uint256[]"}],name:"rawFulfillRandomWords",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"},{internalType:"address",name:"",type:"address"}],name:"roundHasBought",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"}],name:"roundLotteryInfo",outputs:[{internalType:"uint32",name:"round",type:"uint32"},{internalType:"uint256",name:"startNumber",type:"uint256"},{internalType:"uint256",name:"endNumber",type:"uint256"},{internalType:"bool",name:"isLotteryOpen",type:"bool"},{internalType:"uint128",name:"totalPrizePool",type:"uint128"},{internalType:"uint128",name:"totalPendingRewards",type:"uint128"},{internalType:"uint256",name:"lastRequestId",type:"uint256"},{internalType:"uint8",name:"latestRandomNumber",type:"uint8"},{internalType:"uint8",name:"rewardRate",type:"uint8"},{internalType:"bool",name:"isDistributing",type:"bool"},{internalType:"uint256",name:"cumulativePrizeAmount",type:"uint256"},{internalType:"uint128",name:"cumulativeWinners",type:"uint128"},{internalType:"uint64",name:"distributedCount",type:"uint64"},{internalType:"uint128",name:"cumulativePlayers",type:"uint128"},{internalType:"uint256",name:"cumulativeBetAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"},{internalType:"uint8",name:"",type:"uint8"},{internalType:"uint256",name:"",type:"uint256"}],name:"roundTicketsPerNumber",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint8",name:"number",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"s_vrfCoordinator",outputs:[{internalType:"contract IVRFCoordinatorV2Plus",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_vrfCoordinator",type:"address"}],name:"setCoordinator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"number",type:"uint8"}],name:"simulatePreDis",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"},{internalType:"uint256",name:"",type:"uint256"}],name:"soldTickets",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint8",name:"number",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"startNewRound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"vrfConfig",outputs:[{internalType:"uint256",name:"subscriptionId",type:"uint256"},{internalType:"address",name:"coordinator",type:"address"},{internalType:"bytes32",name:"keyHash",type:"bytes32"},{internalType:"uint32",name:"callbackGasLimit",type:"uint32"},{internalType:"uint16",name:"requestConfirmations",type:"uint16"},{internalType:"uint32",name:"numWords",type:"uint32"},{internalType:"bool",name:"isNativePaymentEnabled",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],ue={chainId:11155111,chainName:"sepolia"};let P,l,de=!1;const G=async()=>{if(typeof window.ethereum>"u"){alert("请先安装 MetaMask 等以太坊钱包插件");return}const e="0x"+ue.chainId.toString(16),n=await window.ethereum.request({method:"eth_chainId"});if(console.log(`当前网络 ID: ${n}, 目标网络 ID: ${e}`),n!==e){alert(`请在钱包中切换到 ${ue.chainName} 测试网络`);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}catch(s){if(s.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:sepoliaChainId,chainName:"Sepolia Test Network",rpcUrls:["https://rpc.sepolia.org"],nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.etherscan.io"]}]})}catch{alert("添加 Sepolia 网络失败，请手动切换")}else alert("切换网络失败，请手动切换到 Sepolia")}}},lt=()=>{de||(P=new Ye(window.ethereum),l=new P.eth.Contract(it,_e),de=!0)},h={weiToEther:e=>Number(P.utils.fromWei(e,"ether")),getWinRecords:async e=>await l.getPastEvents("PrizeDistributed",{fromBlock:0,toBlock:"latest",filter:{player:e}}),getRandomNumberFulfilledEvent:async(e,n)=>{let s=[];if(e>n)for(let t=e-1;t>=e-n;t--)s.push(t);else for(let t=e-1;t>0;t--)s.push(t);return await l.getPastEvents("RandomNumberFulfilled",{fromBlock:0,toBlock:"latest",filter:{round:s}})},getTicketPurchasedEvent:async()=>{const e=await P.eth.getAccounts();return await l.getPastEvents("TicketPurchased",{fromBlock:0,toBlock:"latest",filter:{player:e[0]}})},getPlayerPrizeEvent:async()=>{const e=await P.eth.getAccounts(),n=await l.getPastEvents("PrizeDistributed",{fromBlock:0,toBlock:"latest",filter:{player:e[0]}});return console.log("event",n),n},withdrawAll:async()=>{const e=await P.eth.getAccounts();try{const n=await l.methods.withdrawAll().call({from:e[0]});console.log("预测成功，可以调用，返回值:",n)}catch(n){throw console.error("Error checking distribution eligibility:",n),new Error(n.message||"无法提现")}await l.methods.withdrawAll().send({from:e[0]})},simulatePreDis:async e=>{const n=await P.eth.getAccounts();await l.methods.simulatePreDis(e).send({from:n[0]})},getRequireError:e=>{const s=e.message.split(":");return s[s.length-1].trim()},buyTicket:async(e,n)=>{await G();const s=await P.eth.getAccounts();console.log(e,n);try{const t=await l.methods.buyTicket(e).call({from:s[0],value:P.utils.toWei(n,"ether")});console.log("预测成功，可以调用，返回值:",t)}catch(t){throw console.error("Error checking buy eligibility:",t),new Error(t.message||"无法购买彩票，请检查网络或合约状态")}return await l.methods.buyTicket(e).send({from:s[0],value:P.utils.toWei(n,"ether")})},claimPrize:async()=>{const e=await window.ethereum.request({method:"eth_requestAccounts"});await G();try{const s=await l.methods.claimPrize().call({from:e[0]});console.log("预测成功，可以调用，返回值:",s)}catch(s){throw console.error("Error checking claim eligibility:",s),new Error(s.message||"无法领取奖金，请检查网络或合约状态")}return await l.methods.claimPrize().send({from:e[0]})},distributePrizesAndEndCurrentRound:async()=>{await G();const e=await window.ethereum.request({method:"eth_requestAccounts"});try{const s=await l.methods.distributePrizesAndEndCurrentRound().call({from:e[0]});console.log("预测成功，可以调用，返回值:",s)}catch(s){throw console.error("Error checking distribution eligibility:",s),new Error(s.message||"无法分配奖金，请检查网络或合约状态")}return await l.methods.distributePrizesAndEndCurrentRound().send({from:e[0]})},startNewRound:async e=>{await G();const n=await window.ethereum.request({method:"eth_requestAccounts"});try{const i=await l.methods.startNewRound().call({from:n[0]});console.log("预测成功，可以调用，返回值:",i)}catch(i){throw console.error("Error checking new round eligibility:",i),new Error(i.message||"无法开始新一轮，请检查网络或合约状态")}return await l.methods.startNewRound().send({from:n[0]})},acceptOwnership:e=>l.methods.acceptOwnership().send({from:e}),preDistributePrizes:async()=>{await G();const e=await window.ethereum.request({method:"eth_requestAccounts"});try{const s=await l.methods.preDistributePrizes().call({from:e[0]});console.log("预测成功，可以调用，返回值:",s)}catch(s){throw console.error("Error checking pre-distribution eligibility:",s),new Error(s.message||"无法预分配奖金，请检查网络或合约状态")}return await l.methods.preDistributePrizes().send({from:e[0]})},refundTickets:e=>l.methods.refundTickets().send({from:e}),transferOwnership:(e,n)=>l.methods.transferOwnership(n).send({from:e}),setCoordinator:(e,n)=>l.methods.setCoordinator(n).send({from:e}),getCurrentRoundTotalAmount:async()=>{const e=await l.methods.getCurrentRoundTotalAmount().call();return P.utils.fromWei(e,"ether")},getPendingPrize:async e=>{const n=await l.methods.pendingRewards(e).call();return P.utils.fromWei(n,"ether")},getMyPrize:async()=>{const e=await window.ethereum.request({method:"eth_requestAccounts"}),n=await l.methods.pendingRewards(e[0]).call();return P.utils.fromWei(n,"ether")},getMyTicket:async()=>{const e=await window.ethereum.request({method:"eth_requestAccounts"}),n=await l.methods.getMyTicket().call({from:e[0]});return n&&(n.amount=P.utils.fromWei(n.amount,"ether")),n},getPlayerInfo:async()=>{const e=await window.ethereum.request({method:"eth_requestAccounts"}),n=await l.methods.getPlayerInfo(e[0]).call({});return n&&(n.currentBetAmount=P.utils.fromWei(n.currentBetAmount,"ether"),n.pendingPrize=P.utils.fromWei(n.pendingPrize,"ether")),n},contractOwner:()=>l.methods.contractOwner().call(),owner:()=>l.methods.owner().call(),MIN_BET_AMOUNT:()=>l.methods.MIN_BET_AMOUNT().call(),MIN_NUMBER:()=>l.methods.MIN_NUMBER().call(),MAX_NUMBER:()=>l.methods.MAX_NUMBER().call(),ROUND_DURATION:()=>l.methods.ROUND_DURATION().call(),DELAY_DURATION:async()=>await l.methods.DELAY_DURATION().call(),getCurrentTicketsCount:async()=>await l.methods.getCurrentTicketsCount().call(),prevRoundData:async()=>await l.methods.prevRoundData().call(),lotteryInfo:async()=>{const e=await l.methods.lotteryInfo().call(),n=await P.eth.getBlockNumber(),s=await l.methods.DELAY_DURATION().call(),i={round:e.round,startNumber:e.startNumber,endNumber:e.endNumber,isLotteryOpen:e.isLotteryOpen,totalPrizePool:P.utils.fromWei(e.totalPrizePool,"ether"),totalPendingRewards:P.utils.fromWei(e.totalPendingRewards,"ether"),lastRequestId:e.lastRequestId,latestRandomNumber:e.latestRandomNumber,rewardRate:e.rewardRate,isDistributing:e.isDistributing,cumulativePrizeAmount:P.utils.fromWei(e.cumulativePrizeAmount,"ether"),cumulativeWinners:e.cumulativeWinners,distributedCount:e.distributedCount,cumulativePlayers:e.cumulativePlayers,cumulativeBetAmount:P.utils.fromWei(e.cumulativeBetAmount,"ether"),blockNumber:n,delayDuration:s,status:0,stateDesc:"未知状态",simpleState:"未知状态"},t=await l.methods.getLotteryStatus().call();return i.status=Number(t),t==0&&(i.stateDesc="接受投注中",i.simpleState="接受投注中"),t==1&&(i.stateDesc="延时开奖中",i.simpleState="投注结束，待开奖"),t==2&&(i.stateDesc="等待预开奖",i.simpleState="投注结束，待开奖"),t==3&&(i.stateDesc="预开奖中",i.simpleState="投注结束，待开奖"),t==4&&(i.stateDesc="预开奖完成，等待开奖（随机数已生成）",i.simpleState="投注结束，待开奖"),t==5&&(i.stateDesc="开奖完成，等待开启下一轮",i.simpleState=`开奖结束，中奖号码为: ${i.latestRandomNumber}`),i},vrfConfig:()=>l.methods.vrfConfig().call(),s_vrfCoordinator:()=>l.methods.s_vrfCoordinator().call(),getPlayerTicket:e=>l.methods.getPlayerTicket(e).call(),getTotalAmountForNumber:e=>l.methods.getTotalAmountForNumber(e).call(),getTickets:e=>l.methods.getTickets(e).call(),hasBought:(e,n)=>l.methods.hasBought(e,n).call(),requestIdToRandomNumber:e=>l.methods.requestIdToRandomNumber(e).call(),ticketsPerRound:(e,n)=>l.methods.ticketsPerRound(e,n).call(),ticketsPerNumber:(e,n,s)=>l.methods.ticketsPerNumber(e,n,s).call(),rawFulfillRandomWords:(e,n,s)=>l.methods.rawFulfillRandomWords(n,s).send({from:e})};lt();const B={__name:"LoadingBlock",props:{customClass:{type:String,default:"loading-block"}},setup(e){return(n,s)=>(c(),M("div",{class:ye(e.customClass)},[o(K(je)),I(" "+v(n.$t("message.loading"))+"... ",1)],2))}},ut={style:{"text-align":"center"}},dt={__name:"UserInfo",setup(e,{expose:n}){const{t:s}=Z(),i=d(0),t=d(0),y=d("--"),g=d("--"),b=d(!1),w=d(0),p=d(!0),E=d(0),z=d(0),R=d(!1),D=d([]),$=d([]),W=d(""),T=async()=>{$.value=[{title:s("message.roundName"),dataIndex:"round",key:"round"},{title:s("message.betNumber"),dataIndex:"number",key:"number"},{title:s("message.bet")+"(ETH)",dataIndex:"betAmount",key:"betAmount"},{title:s("message.reward"),dataIndex:"reward",key:"reward"}],D.value=[];const m=await h.getWinRecords(W.value);if(m)for(let A=0;A<m.length;A++)D.value.push({round:m[A].returnValues.round,number:m[A].returnValues.winNumber,betAmount:h.weiToEther(m[A].returnValues.betAmount),reward:h.weiToEther(m[A].returnValues.prizeAmount)});R.value=!0},_=async()=>{b.value=!0;try{await h.claimPrize(),await O(),x.success(s("message.claimSuccess"))}catch(m){x.error(s("message.claimFailed")+" ："+h.getRequireError(m))}finally{b.value=!1}},O=async()=>{p.value=!0;const m=await h.getPlayerInfo();W.value=m.player,console.log("playInfo",m),w.value=m.pendingPrize,y.value=Number(m.currentBetNumber)==0?"--":Number(m.currentBetNumber),g.value=m.currentBetAmount==0?"--":Number(m.currentBetAmount),open.value=!0;const A=await h.getPlayerPrizeEvent();if(A){i.value=A.length;let k=0;for(let C=0;C<A.length;C++)k+=h.weiToEther(A[C].returnValues.prizeAmount);t.value=k}const N=await h.getTicketPurchasedEvent();if(N){E.value=N.length;let k=0;for(let C=0;C<N.length;C++)k+=h.weiToEther(N[C].returnValues.amount);z.value=k}p.value=!1};return n({showUserInfo:O}),fe(O),(m,A)=>{const N=ge,k=ve,C=he,Y=ae,j=we,H=oe;return c(),M(X,null,[a("div",ut,[o(C,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(k,{span:24},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.myCurrentRoundBetNumber"),value:y.value,"value-style":{color:"#3f8600",fontWeight:"600",fontSize:"60px"}},null,8,["title","value"]))]),_:1})]),_:1}),o(C,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.myCurrentRoundBetAmount"),precision:2,value:g.value,"value-style":{color:"#3f8600"}},null,8,["title","value"]))]),_:1}),o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.pendingRewards"),precision:4,value:w.value},null,8,["title","value"]))]),_:1})]),_:1}),o(C,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.totalBets"),value:E.value},null,8,["title","value"]))]),_:1}),o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.totalBetAmount"),precision:4,value:z.value},null,8,["title","value"]))]),_:1})]),_:1}),o(C,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.totalWins"),value:i.value},null,8,["title","value"]))]),_:1}),o(k,{span:12},{default:r(()=>[p.value?(c(),f(B,{key:0})):(c(),f(N,{key:1,title:m.$t("message.totalPrizeAmount"),precision:4,value:t.value},null,8,["title","value"]))]),_:1})]),_:1}),o(C,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(k,{span:24},{default:r(()=>[o(Y,{onClick:_,loading:b.value,style:{"margin-left":"20px"}},{default:r(()=>[I(v(m.$t("message.withdrawReward")),1)]),_:1},8,["loading"]),o(Y,{onClick:T,style:{"margin-left":"20px"}},{default:r(()=>[I(v(m.$t("message.winRecord")),1)]),_:1})]),_:1})]),_:1})]),o(H,{open:R.value,"onUpdate:open":A[0]||(A[0]=J=>R.value=J),title:m.$t("message.winRecord"),width:"320",closable:!1},{default:r(()=>[o(j,{dataSource:D.value,columns:$.value},null,8,["dataSource","columns"])]),_:1},8,["open","title"])],64)}}},ct=V(dt,[["__scopeId","data-v-712dbe43"]]),mt={style:{"margin-right":"2px",color:"gray"}},pt={style:{"margin-right":"2px","font-size":"large",color:"tomato"}},yt={style:{"margin-bottom":"10px"}},ft={key:2},bt={style:{"margin-bottom":"20px"}},vt={style:{float:"right","margin-right":"15px"}},gt={style:{float:"left","margin-left":"15px"}},ht={style:{float:"right","margin-right":"15px"}},wt={style:{float:"left","margin-left":"15px"}},_t={style:{float:"right","margin-right":"15px"}},Tt={style:{float:"left","margin-left":"15px"}},Rt={__name:"LotteryInfo",emits:["update:round"],setup(e,{emit:n}){const{t:s}=Z(),i=te(),t=d(""),y=d(0),g=d(0),b=d(!1),w=d("加载中..."),p=d(!0),E=d(0),z=d(0),R=d(0),D=d(null),$=d(!1),W=d(null),T=d(""),_=d(0),O=d(0),m=d(0),A=d(0),N=d("--"),k=d(!1),C=d([]),Y=d([]),j=d(0),H=d(null),J=n,Te=async()=>{if(k.value=!0,Y.value=[{title:s("message.roundName"),dataIndex:"round",key:"round"},{title:s("message.winNumber"),dataIndex:"number",key:"number"}],j.value<=1)return;C.value=[];const u=await h.getRandomNumberFulfilledEvent(Number(j.value),10);if(u.length>0){for(let L=0;L<u.length;L++){let q=u[L].returnValues;C.value.push({round:q.round,number:q.randomNumber})}C.value=C.value.reverse()}console.info("event",u)},Re=()=>{i.push("/lottery-bet")},Ae=async()=>{try{const u=W.value.innerText;await navigator.clipboard.writeText(u),x.success(s("message.copySuccess"))}catch{x.error(s("message.copyFailed"))}},Pe=u=>{},ke=async()=>{b.value=!0,D.value&&D.value.showUserInfo()},Ee=async()=>{await Q()},Q=async()=>{p.value=!0;try{t.value=_e;const u=await h.lotteryInfo();console.log("lotteryInfo",u),J("update:round",u.round),w.value=u.simpleState,u.status==0?(T.value="Betting",$.value=!0):(T.value="NoBetting",$.value=!1),j.value=u.round,_.value=u.status,O.value=u.latestRandomNumber,y.value=await h.getCurrentRoundTotalAmount(),g.value=u.totalPrizePool,E.value=(await h.getCurrentTicketsCount()).toString(),z.value=Number(u.cumulativeWinners),R.value=u.cumulativePrizeAmount,m.value=Number(u.cumulativePlayers),A.value=u.cumulativeBetAmount,u.endNumber-u.blockNumber<1e3?N.value=u.endNumber-u.blockNumber:N.value="--"}catch(u){console.error("Error loading lottery info:",u)}finally{p.value=!1}};return fe(()=>{Q(),H.value||(H.value=setInterval(()=>{Q()},3e4))}),De(()=>{H.value&&(clearInterval(H.value),H.value=null)}),(u,L)=>{const q=Ve,S=ve,F=he,Ne=ne,U=ge,re=oe,Ce=we;return c(),M(X,null,[a("div",null,[o(F,{style:{"margin-bottom":"20px"}},{default:r(()=>[o(S,{span:24},{default:r(()=>[a("span",mt,v(u.$t("message.contractAddress"))+"： ",1),a("span",{ref_key:"contractAddr",ref:W,style:{"margin-right":"5px",color:"gray"}},v(t.value),513),o(q,{placement:"top",title:u.$t("message.copyAddress")},{default:r(()=>[a("span",{style:{cursor:"pointer"},onClick:Ae},"📋")]),_:1},8,["title"])]),_:1})]),_:1}),N.value>=0?(c(),f(F,{key:0,style:{"margin-bottom":"20px"}},{default:r(()=>[o(S,{span:24},{default:r(()=>[a("span",pt,v(u.$t("message.betRemainTip",{blockCountdown:N.value})),1)]),_:1})]),_:1})):pe("",!0),o(F,null,{default:r(()=>[o(S,{span:8,offset:8},{default:r(()=>[a("div",yt,[o(Ne,null,{default:r(()=>[o(q,{placement:"top",title:u.$t("message.refresh")},{default:r(()=>[a("span",{style:{cursor:"pointer","font-size":"x-large"},onClick:Ee},"🔄")]),_:1},8,["title"]),o(q,{placement:"top",title:u.$t("message.showRoundsInfo")},{default:r(()=>[a("span",{style:{cursor:"pointer","font-size":"x-large"},onClick:Te},"🧿")]),_:1},8,["title"]),o(q,{placement:"top",title:u.$t("message.myInfo")},{default:r(()=>[a("span",{style:{cursor:"pointer","font-size":"x-large"},onClick:ke},"👤")]),_:1},8,["title"])]),_:1})])]),_:1})]),_:1}),o(F,null,{default:r(()=>[o(S,{span:24},{default:r(()=>[a("div",{class:ye(T.value),style:{"margin-bottom":"20px","font-size":"x-large"}},[p.value?(c(),f(B,{key:0,class:"loading"})):$.value?(c(),M("span",{key:1,style:{color:"white",cursor:"pointer"},onClick:Re},"💵 "+v(u.$t("message.bet")),1)):(c(),M("span",ft,v(u.$t("lotteryStatus."+_.value,{number:O.value})),1))],2)]),_:1})]),_:1}),o(F,null,{default:r(()=>[o(S,{span:24},{default:r(()=>[a("div",bt,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.totalPrizePool"),precision:4,value:g.value,class:"statistic-info","value-style":{fontSize:"30px"}},null,8,["title","value"]))])]),_:1})]),_:1}),o(F,null,{default:r(()=>[o(S,{span:10,offset:2},{default:r(()=>[a("div",vt,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.bettorsThisRound"),value:E.value,class:"statistic-info"},null,8,["title","value"]))])]),_:1}),o(S,{span:10},{default:r(()=>[a("div",gt,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.currentRoundBetAmount"),value:y.value,class:"statistic-info"},null,8,["title","value"]))])]),_:1})]),_:1}),o(F,null,{default:r(()=>[o(S,{span:10,offset:2},{default:r(()=>[a("div",ht,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.totalWinningEntries"),value:z.value,class:"statistic-info"},null,8,["title","value"]))])]),_:1}),o(S,{span:10},{default:r(()=>[a("div",wt,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.totalRewardsDistributed"),value:R.value,precision:4,class:"statistic-info"},null,8,["title","value"]))])]),_:1})]),_:1}),o(F,null,{default:r(()=>[o(S,{span:10,offset:2},{default:r(()=>[a("div",_t,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.historyBetEntries"),value:m.value,class:"statistic-info"},null,8,["title","value"]))])]),_:1}),o(S,{span:10},{default:r(()=>[a("div",Tt,[p.value?(c(),f(B,{key:0,class:"loading"})):(c(),f(U,{key:1,title:u.$t("message.historyBetAmount"),value:A.value,precision:4,class:"statistic-info"},null,8,["title","value"]))])]),_:1})]),_:1})]),o(re,{open:b.value,"onUpdate:open":L[0]||(L[0]=ee=>b.value=ee),class:"custom-class","root-class-name":"root-class-name","root-style":{color:"gary"},title:u.$t("message.myInfo"),placement:"right",onAfterOpenChange:Pe},{default:r(()=>[o(ct,{ref_key:"userInfoRef",ref:D},null,512)]),_:1},8,["open","title"]),o(re,{open:k.value,"onUpdate:open":L[1]||(L[1]=ee=>k.value=ee),class:"custom-class","root-class-name":"root-class-name","root-style":{color:"gary"},title:u.$t("message.winRecord"),placement:"right"},{default:r(()=>[o(Ce,{dataSource:C.value,columns:Y.value},null,8,["dataSource","columns"])]),_:1},8,["open","title"])],64)}}},At=V(Rt,[["__scopeId","data-v-9fee64b8"]]),Pt={class:"p-4"},kt={class:"connect-wallet"},Et={class:"text-2xl font-bold mb-4 white"},Nt={__name:"Home",setup(e){const n=d(0),s=d(),i=t=>{n.value=t};return(t,y)=>(c(),M("div",Pt,[a("div",kt,[o(rt,{ref_key:"wallet",ref:s},null,512)]),a("h1",Et,"🎰 "+v(t.$t("message.homeTitle"))+"("+v(t.$t("message.round",{round:n.value}))+")",1),o(At,{"onUpdate:round":i})]))}},Ct=V(Nt,[["__scopeId","data-v-0c377240"]]),It={class:"p-4"},Bt={style:{color:"red"}},zt={__name:"Admin",setup(e){const n=[{path:"/",breadcrumbName:"首页"},{path:"/Admin",breadcrumbName:"后台管理"}],s=d("这是一个仅限管理员访问的区域");te();const i=d(!1),t=d(!1),y=d(!1),g=d(!1),b=d(!1),w=Me({round:0,startNumber:0,endNumber:0,isLotteryOpen:!1,totalPrizePool:0,totalPendingRewards:0,lastRequestId:0,latestRandomNumber:0,rewardRate:0,isDistributing:!1,blockNumber:0,delayDuration:0,stateDesc:"未知状态"}),p=async()=>{try{await h.withdrawAll(),x.success("提现成功")}catch(T){x.error(h.getRequireError(T),5)}},E=async()=>{await h.simulatePreDis(2)},z=T=>{console.log("open",T)},R=async()=>{t.value=!0;const T=await h.lotteryInfo();Object.assign(w,T),i.value=!0,t.value=!1},D=async()=>{y.value=!0,console.log("开始新一轮投注");try{await h.startNewRound(),x.success("新一轮投注已开启！")}catch(T){x.error(h.getRequireError(T),5)}finally{y.value=!1}},$=async()=>{g.value=!0,console.log("预开奖");try{await h.preDistributePrizes(),x.success("预开奖成功！")}catch(T){x.error(h.getRequireError(T),5)}finally{g.value=!1}},W=async()=>{b.value=!0,console.log("号码开奖");try{await h.distributePrizesAndEndCurrentRound(),x.success("号码开奖成功！")}catch(T){x.error(h.getRequireError(T),5)}finally{b.value=!1}};return(T,_)=>{const O=se,m=ae,A=ne,N=oe;return c(),M(X,null,[o(O,{style:{border:"1px solid rgb(235, 237, 240)"},title:"",breadcrumb:{routes:n},"sub-title":""},null,8,["breadcrumb"]),a("div",It,[_[7]||(_[7]=a("h1",{class:"text-2xl font-bold mb-4"},"🎰 欢迎来到管理后台",-1)),a("div",Bt,v(s.value),1),_[8]||(_[8]=a("div",null,null,-1)),a("div",null,[o(A,null,{default:r(()=>[o(m,{onClick:R,loading:t.value},{default:r(()=>_[1]||(_[1]=[I("显示当前轮信息")])),_:1,__:[1]},8,["loading"]),o(m,{onClick:D,loading:y.value},{default:r(()=>_[2]||(_[2]=[I("开启新一轮投注")])),_:1,__:[2]},8,["loading"])]),_:1})]),a("div",null,[o(A,null,{default:r(()=>[o(m,{onClick:$,loading:g.value},{default:r(()=>_[3]||(_[3]=[I("预开奖")])),_:1,__:[3]},8,["loading"]),o(m,{onClick:W,loading:b.value},{default:r(()=>_[4]||(_[4]=[I("开奖")])),_:1,__:[4]},8,["loading"])]),_:1})]),a("div",null,[o(A,null,{default:r(()=>[o(m,{onClick:E,loading:g.value},{default:r(()=>_[5]||(_[5]=[I("模拟预开奖")])),_:1,__:[5]},8,["loading"]),o(m,{onClick:p,loading:b.value},{default:r(()=>_[6]||(_[6]=[I("提现")])),_:1,__:[6]},8,["loading"])]),_:1})])]),o(N,{open:i.value,"onUpdate:open":_[0]||(_[0]=k=>i.value=k),class:"custom-class","root-class-name":"root-class-name","root-style":{color:"blue"},style:{color:"red"},title:"当前轮次信息",placement:"right",onAfterOpenChange:z},{default:r(()=>[a("p",null,"当前轮次："+v(w.round),1),a("p",null,"总奖金池："+v(w.totalPrizePool)+" ETH",1),a("p",null,"待领取奖励总额："+v(w.totalPendingRewards)+" ETH",1),a("p",null,"起始区块：["+v(w.startNumber)+" ,"+v(w.endNumber)+"], 当前区块："+v(w.blockNumber),1),a("p",null,"是否开启投注: "+v(w.isLotteryOpen),1),a("p",null,"开奖号码："+v(w.latestRandomNumber),1),a("p",null,"奖励分配率："+v(w.rewardRate)+"%",1),a("p",null,"是否正在开奖: "+v(w.isDistributing),1),a("p",null,"延迟时间: "+v(w.delayDuration)+" 区块",1),a("p",null,"状态描述: "+v(w.stateDesc),1)]),_:1},8,["open"])],64)}}},Dt={class:"about-lottery"},Mt={__name:"About",setup(e){const{t:n}=Z(),s=[{path:"/",breadcrumbName:n("breadcrumb.home")},{path:"/About",breadcrumbName:n("breadcrumb.about")}];return(i,t)=>{const y=se;return c(),M(X,null,[o(y,{style:{color:"white"},title:"",breadcrumb:{routes:s},"sub-title":""},null,8,["breadcrumb"]),a("div",Dt,[t[6]||(t[6]=be('<div class="section-title" data-v-ae176035>🎯 彩票玩法简介</div><section data-v-ae176035><h2 data-v-ae176035>🎮 玩法说明</h2><ul data-v-ae176035><li data-v-ae176035>每轮彩票由管理员开启，用户可在开放期间内购买彩票。</li><li data-v-ae176035>投注时选择 1 至 5 中的一个号码，并支付相应 ETH（每注最低 0.01 ETH）。</li><li data-v-ae176035>首位玩家投注后将启动倒计时，约 100 个区块后自动结束本轮。</li><li data-v-ae176035>结束后，合约通过 <strong data-v-ae176035>Chainlink VRF</strong> 获取随机数进行开奖，确保公平。</li><li data-v-ae176035>中奖奖金为玩家总投注额的 <strong data-v-ae176035>85%</strong>，按投注比例分配；若无人中奖，奖金滚入下一轮。</li><li data-v-ae176035>中奖后可前往 👤 <strong data-v-ae176035>个人信息页面</strong> 查看记录并提取奖金。</li></ul></section>',2)),a("section",null,[t[5]||(t[5]=a("h2",null,"🔁 主要流程",-1)),a("ul",null,[t[2]||(t[2]=a("li",null,"管理员开启新一轮彩票。",-1)),a("li",null,[t[0]||(t[0]=I("主界面显示 ")),a("code",null,"💵 "+v(i.$t("message.bet")),1),t[1]||(t[1]=I(" 时，表示当前可投注。"))]),t[3]||(t[3]=a("li",null,"投注后，等待区块倒计时结束，系统调用合约自动关闭投注，并请求 VRF 随机数。",-1)),t[4]||(t[4]=a("li",null,"VRF 返回随机数后，系统执行开奖逻辑。",-1))])]),t[7]||(t[7]=a("section",null,[a("h2",null,"🛡️ 安全与公平"),a("ul",null,[a("li",null,"合约源码已开源并部署上链，支持安全审计。"),a("li",null,"管理员无法提取奖池资金，仅收取 15% 作为运营手续费。"),a("li",null,"所有参数与操作均在链上透明执行，管理员无法干预开奖。"),a("li",null,"用户的奖金需由本人钱包自行提取，管理员无法代为操作。"),a("li",null,[I("采用 "),a("strong",null,"Chainlink VRF"),I(" 实现链上可验证的随机数。")]),a("li",null,"管理员权限受控，用户资产安全有保障。")])],-1))]),t[8]||(t[8]=a("div",{style:{"margin-bottom":"30px"}},null,-1))],64)}}},$t=V(Mt,[["__scopeId","data-v-ae176035"]]),xt={class:"about-lottery"},St={__name:"About-en",setup(e){const{t:n}=Z(),s=[{path:"/",breadcrumbName:n("breadcrumb.home")},{path:"/About",breadcrumbName:n("breadcrumb.about")}];return(i,t)=>{const y=se;return c(),M(X,null,[o(y,{style:{color:"white"},title:"",breadcrumb:{routes:s},"sub-title":""},null,8,["breadcrumb"]),a("div",xt,[t[6]||(t[6]=be('<div class="section-title" data-v-e99dd57f>🎯 Lottery Game Overview</div><section data-v-e99dd57f><h2 data-v-e99dd57f>🎮 Game Rules</h2><ul data-v-e99dd57f><li data-v-e99dd57f>Each round is started by the admin. Players can purchase tickets during the open period.</li><li data-v-e99dd57f>Choose a number between 1 and 5 and pay the required ETH (minimum 0.01 ETH per ticket) to place a bet.</li><li data-v-e99dd57f>Once the first player places a bet, a countdown begins. The round ends after approximately 100 blocks.</li><li data-v-e99dd57f>After the round ends, a random number is generated via <strong data-v-e99dd57f>Chainlink VRF</strong> to determine the winning number.</li><li data-v-e99dd57f>85% of the total bet amount is distributed to winners based on their stake. If no winner, the prize rolls over to the next round.</li><li data-v-e99dd57f>Winners can view their rewards in the 👤 <strong data-v-e99dd57f>My Info</strong> page and manually withdraw their earnings.</li></ul></section>',2)),a("section",null,[t[5]||(t[5]=a("h2",null,"🔁 Main Process",-1)),a("ul",null,[t[2]||(t[2]=a("li",null,"Admin starts a new round.",-1)),a("li",null,[t[0]||(t[0]=I("On the home screen, when you see ")),a("code",null,"💵 "+v(i.$t("message.bet")),1),t[1]||(t[1]=I(", it means betting is open."))]),t[3]||(t[3]=a("li",null,"After betting, the system waits for the block countdown to finish, then calls the contract to close betting and request a random number from Chainlink VRF.",-1)),t[4]||(t[4]=a("li",null,"Once the random number is returned, the contract finalizes the draw and determines the winner.",-1))])]),t[7]||(t[7]=a("section",null,[a("h2",null,"🛡️ Security & Fairness"),a("ul",null,[a("li",null,"Smart contract code is open-source and verified on-chain. Can be audited anytime."),a("li",null,"Admin has no access to the prize pool. 15% of the bet amount is reserved to cover operational gas fees."),a("li",null,"All contract parameters and draws are handled on-chain, with full transparency and no admin interference."),a("li",null,"Only the player can withdraw their reward. Admin cannot access user funds."),a("li",null,[a("strong",null,"Chainlink VRF"),I(" provides verifiable random numbers to ensure fairness.")]),a("li",null,"Admin permissions are restricted. Your funds are secure.")])],-1))]),t[8]||(t[8]=a("div",{style:{"margin-bottom":"30px"}},null,-1))],64)}}},Wt=V(St,[["__scopeId","data-v-e99dd57f"]]),Ot=[{path:"/",name:"Home",component:Ct,meta:{layout:"FullscreenLayout"}},{path:"/Admin",name:"Admin",component:zt,meta:{layout:"AdminLayout"}},{path:"/About",name:"About",component:$t,meta:{layout:"FullscreenLayout"}},{path:"/About-En",name:"About-en",component:Wt,meta:{layout:"FullscreenLayout"}},{path:"/lottery-bet",name:"LotteryBet",component:()=>at(()=>import("./LotteryBet-B9T2hgci.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{layout:"FullscreenLayout"}}],Lt=$e({history:xe(),routes:Ot}),Ft={home:"首页",bet:"投注页面",about:"关于页面"},Ht={0:"接受投注中",1:"投注结束，待开奖",2:"投注结束，待开奖",3:"投注结束，待开奖",4:"投注结束，待开奖",5:"开奖结束，中奖号码为 : {number}"},qt={hello:"你好，世界",language:"中文",homeTitle:"数字竞猜",round:"轮次: {round}",contractAddress:"合约地址",copyAddress:"复制地址",refresh:"刷新",myInfo:"我的信息",connectWallet:"连接钱包",connected:"已连接",totalPrizePool:"总奖池 (ETH)",bettorsThisRound:"本轮参与人数",currentRoundBetAmount:"本轮总投注金额 (ETH)",totalWinningEntries:"总中奖人次",totalRewardsDistributed:"总奖励发放 (ETH)",myCurrentRoundBetNumber:"本轮投注号码",myCurrentRoundBetAmount:"本轮投注金额 (ETH)",pendingRewards:"待领取奖励(ETH)",totalBets:"总投注次数",totalBetAmount:"总投注金额(ETH)",totalWins:"总中奖次数",totalPrizeAmount:"总中奖金额(ETH)",withdrawReward:"提取奖励",bet:"投注",betNumber:"投注号码",betAmount:"投注金额(ETH)",tip1:"请选择您的投注号码",tip2:"请输入您的投注金额！最小投注金额为0.01 ETH",reset:"重置",tip3:"请在投注前确保已连接钱包，并且当前网络为 {network}",status1:"投注已关闭，等待结果",betSuccess:"投注成功！",betFailed:"投注失败.",installWallet:"请先安装 MetaMask 等以太坊钱包插件",claimSuccess:"奖金领取成功！",claimFailed:"奖金领取失败",copySuccess:"复制成功！",copyFailed:"复制失败！",historyBetEntries:"总投注次数",historyBetAmount:"总投注金额(ETH)",showRoundsInfo:"显示历史轮次信息",roundName:"轮次 ",winNumber:"中奖号码",winRecord:"中奖记录",cancel:"取消",about:"关于",loading:"加载中",betRemainTip:"距离投注结束还有：{ blockCountdown  } 区块",reward:"奖励(ETH)"},Ut={breadcrumb:Ft,lotteryStatus:Ht,message:qt},Vt={home:"Home",bet:"Betting Page",about:"About Page"},Yt={0:"Betting Open",1:"Bet Closed, Waiting For Result",2:"Bet Closed, Waiting For Result",3:"Bet Closed, Waiting For Result",4:"Bet Closed, Waiting For Result",5:"Winning Number : {number}"},jt={hello:"Hello World",language:"English",homeTitle:"Guess Number",round:"Round: {round}",contractAddress:"Contract Addr",copyAddress:"Copy Address",refresh:"Refresh",myInfo:"My Info",connectWallet:"Connect Wallet",connected:"Connected",totalPrizePool:"Total Prize Pool (ETH)",bettorsThisRound:"Players This Round",currentRoundBetAmount:"Round Bet Total (ETH)",totalWinningEntries:"Total Winning Entries",totalRewardsDistributed:"Total ETH Awarded",myCurrentRoundBetNumber:"Your Bet Number",myCurrentRoundBetAmount:"Current Bets (ETH)",pendingRewards:"Pending Rewards(ETH)",totalBets:"Total Bets",totalBetAmount:"Total Bet Amount(ETH)",totalWins:"Total Wins",totalPrizeAmount:"Total Prize Amount(ETH)",withdrawReward:"Claim Reward",bet:"Bet",betNumber:"Bet Number",betAmount:"Bet Amount(ETH)",tip1:"Please select your bet number",tip2:"Please enter your bet amount! Minimum is 0.01 ETH",reset:"Reset",tip3:"Please make sure your wallet is connected and the current network is {network} before placing a bet.",status1:"Betting closed, waiting for results",betSuccess:"Bet Placed Successfully!",betFailed:"Bet Failed ",installWallet:"Please install MetaMask or another Ethereum wallet extension first",claimSuccess:"Reward claimed successfully!",claimFailed:"Reward claim failed",copySuccess:"Copy Successfully！",copyFailed:"Copy Failed！",historyBetEntries:"History Bet Entries  ",historyBetAmount:"Past Bets (ETH)",showRoundsInfo:"Show Past Rounds Info",roundName:"Round ",winNumber:"Winning Number",winRecord:"Winning Record",cancel:"Cancel",about:"About",loading:"Loading",betRemainTip:"Bet ends in { blockCountdown  } blocks",reward:"Reward(ETH)"},Gt={breadcrumb:Vt,lotteryStatus:Yt,message:jt},Zt=Se({legacy:!1,locale:"zh",fallbackLocale:"en",messages:{zh:Ut,en:Gt}});We(et).use(Lt).use(Zt).mount("#app");export{h as L,ue as S,V as _};
